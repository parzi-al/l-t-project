<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model Predictions</title>
  <style>
    /* Reset and General Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f4f7fc;
      color: #333;
      line-height: 1.6;
      margin: 0;
    }

    h1 {
      text-align: center;
      padding: 20px;
      background: linear-gradient(45deg, #3498db, #9b59b6);
      color: white;
      margin-bottom: 30px;
      border-radius: 8px 8px 0 0;
    }

    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: #2c3e50;
      font-size: 1.5rem;
    }

    /* Navigation Buttons */
    .nav-buttons {
      display: flex;
      justify-content: center;
      margin-bottom: 30px;
    }

    .nav-buttons button {
      background-color: #34495e;
      color: white;
      border: none;
      padding: 15px 25px;
      margin: 0 10px;
      border-radius: 50px;
      font-size: 16px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.3s ease;
    }

    .nav-buttons button:hover {
      background-color: #2ecc71;
      transform: scale(1.05);
    }

    /* Sections */
    .section {
      display: none;
      padding: 25px;
      margin: 0 auto 30px auto;
      width: 90%;
      max-width: 700px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .section.active {
      display: block;
    }

    form label {
      display: block;
      margin: 15px 0 5px;
      font-weight: bold;
      font-size: 14px;
    }

    form input,
    form textarea,
    form select {
      width: 100%;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
      font-size: 14px;
    }

    form input[type="submit"],
    form button {
      background-color: #2ecc71;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 50px;
      transition: transform 0.2s, background-color 0.3s ease;
    }

    form input[type="submit"]:hover,
    form button:hover {
      background-color: #27ae60;
      transform: scale(1.05);
    }

    /* Visualization Images */
    .visualization-images {
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 20px;
      margin: 20px 0;
    }

    .visualization-images img {
      width: 100%;
      max-width: 300px;
      border: 1px solid #ddd;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    /* Footer */
    footer {
      text-align: center;
      padding: 15px;
      margin-top: 30px;
      background: #34495e;
      color: white;
      border-radius: 0 0 8px 8px;
    }
  </style>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const sections = document.querySelectorAll(".section");
      const buttons = document.querySelectorAll(".nav-buttons button");

      function showSection(sectionId) {
        sections.forEach((section) => section.classList.remove("active"));
        const targetSection = document.getElementById(sectionId);
        if (targetSection) {
          targetSection.classList.add("active");
        }
      }

      buttons.forEach((button) => {
        button.addEventListener("click", function () {
          const sectionId = this.getAttribute("data-target");
          showSection(sectionId);
        });
      });

      showSection("house-prediction"); // Default section

      // AJAX Form Submission
      function handleFormSubmission(formSelector, resultContainer) {
        const form = document.querySelector(formSelector);
        form.addEventListener("submit", function (e) {
          e.preventDefault(); // Prevent full page reload
          const formData = new FormData(form);

          fetch("/", {
            method: "POST",
            body: formData,
          })
            .then((response) => response.text())
            .then((data) => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(data, "text/html");
              const newResults = htmlDoc.querySelector(resultContainer);
              document.querySelector(resultContainer).innerHTML =
                newResults.innerHTML;
            })
            .catch((error) => console.error("Error:", error));
        });
      }

      // Apply AJAX to all forms
      handleFormSubmission("#house-prediction form", "#house-prediction");
      handleFormSubmission("#spam-detection form", "#spam-detection");
      handleFormSubmission(
        "#image-visualizations form",
        "#image-visualizations"
      );
      handleFormSubmission("#churn-prediction form", "#churn-prediction");
    });
  </script>
</head>
<body>
  <h1>Model Predictions Dashboard</h1>

  <!-- Navigation Buttons -->
  <div class="nav-buttons">
    <button type="button" data-target="house-prediction">üè† House Prices</button>
    <button type="button" data-target="spam-detection">üìß Spam Detection</button>
    <button type="button" data-target="image-visualizations">üìä Visualizations</button>
    <button type="button" data-target="churn-prediction">üö™ Churn Prediction</button>
  </div>

  <!-- House Price Prediction -->
  <div id="house-prediction" class="section active">
    <h2>üè† House Price Prediction</h2>
    <form id="house-form" method="POST">
      <label>Lot Area: <input type="number" name="LotArea" required /></label>
      <label>Overall Quality: <input type="number" name="OverallQual" required /></label>
      <label>Overall Condition: <input type="number" name="OverallCond" required /></label>
      <label>Living Area: <input type="number" name="GrLivArea" required /></label>
      <label>Bedrooms: <input type="number" name="BedroomAbvGr" required /></label>
      <label>Year Built: <input type="number" name="YearBuilt" required /></label>
      <input type="submit" value="Predict House Prices" />
    </form>
    <p>Linear Regression: <strong>{{ predictions.get('house_linear') }}</strong></p>
    <p>Random Forest: <strong>{{ predictions.get('house_rf') }}</strong></p>
  </div>

  <!-- Spam Detection -->
  <div id="spam-detection" class="section">
    <h2>üìß Spam Detection</h2>
    <form id="spam-form" method="POST">
      <label>Email Text: <textarea name="email_text" rows="4" required></textarea></label>
      <button type="submit">Predict Spam</button>
    </form>
    <p>Logistic Regression: <strong>{{ predictions.get('spam_logistic') }}</strong></p>
    <p>Naive Bayes: <strong>{{ predictions.get('spam_nb') }}</strong></p>
  </div>

  <!-- Image Visualizations -->
  <div id="image-visualizations" class="section">
    <h2>üìä Image Visualizations</h2>
    <div class="visualization-images">
      <img src="/static/sample_images.png" alt="Sample Digits" />
      {% if show_images %}
      <img src="/static/pca_plot.png" alt="PCA Visualization" />
      <img src="/static/tsne_plot.png" alt="t-SNE Visualization" />
      {% endif %}
    </div>
    <form id="image-form" method="POST">
      <input type="hidden" name="generate_plots" value="true" />
      <button type="submit">Generate Plots</button>
    </form>
  </div>

  <!-- Customer Churn Prediction -->
  <div id="churn-prediction" class="section">
    <h2>üö™ Customer Churn Prediction</h2>
    <form id="churn-form" method="POST">
      <label>Age: <input type="number" name="Age" required /></label>
      <label>Gender: <select name="Gender"><option>Male</option><option>Female</option></select></label>
      <label>Tenure: <input type="number" name="Tenure" required /></label>
      <label>Usage Frequency: <input type="number" name="UsageFrequency" required /></label>
      <label>Support Calls: <input type="number" name="SupportCalls" required /></label>
      <label>Payment Delay: <input type="number" name="PaymentDelay" required /></label>
      <label>Subscription: <select name="SubscriptionType"><option>Standard</option><option>Premium</option></select></label>
      <label>Contract Length: <input type="number" name="ContractLength" required /></label>
      <label>Total Spend: <input type="number" name="TotalSpend" required /></label>
      <label>Last Interaction: <input type="number" name="LastInteraction" required /></label>
      <button type="submit">Predict Churn</button>
    </form>
    <p>Logistic Regression: <strong>{{ predictions.get('churn_linear') }}</strong></p>
    <p>Random Forest: <strong>{{ predictions.get('churn_rf') }}</strong></p>
    <p>Naive Bayes: <strong>{{ predictions.get('churn_nb') }}</strong></p>
    <p>Gradient Boosting: <strong>{{ predictions.get('churn_gb') }}</strong></p>
      <p>K-Nearest Neighbors: <strong>{{ predictions.get('churn_knn') }}</strong></p>
    <p>Support Vector Machine: <strong>{{ predictions.get('churn_svm') }}</strong></p>

  </div>

  <!-- Footer -->

</body>
</html>
